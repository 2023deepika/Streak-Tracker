<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreakTracker - Build Unbreakable Habits</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

        :root {
            --bg: #0a0a0a;
            --card: #1a1a1a;
            --primary: #ff4d8d;
            --secondary: #ff8cb4;
            --accent: #ff3366;
            --success: #4dff88;
            --warning: #ffd166;
            --danger: #ff6b6b;
            --text: #f0f0f0;
            --muted: #a0a0a0;
            --notepad-bg: #1a1a1a;
            --notepad-text: #f0f0f0;
            --notepad-border: #2a2a2a;
            --notepad-header: #ff4d8d;
            --button-bg: #2a2a2a;
            --button-hover: #3a3a3a;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Press Start 2P', cursive;
            background: 
                linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%),
                repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255, 77, 141, 0.03) 10px, rgba(255, 77, 141, 0.03) 20px);
            color: var(--text);
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            line-height: 1.6;
            position: relative;
            overflow-x: hidden;
            image-rendering: pixelated;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 10% 20%, rgba(255, 77, 141, 0.08) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(255, 140, 180, 0.05) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, rgba(255, 51, 102, 0.03) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        h1, h2, .header-font {
            font-family: 'Press Start 2P', cursive;
            text-align: center;
        }

        h1 {
            margin-bottom: 15px;
            font-size: 2rem;
            color: var(--primary);
            text-shadow: 0 0 15px rgba(255, 77, 141, 0.7);
            letter-spacing: 1px;
            padding: 10px;
            position: relative;
        }

        h1::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
            border-radius: 2px;
        }

        .tagline {
            margin-bottom: 30px;
            font-size: 0.8rem;
            color: var(--text);
            background: rgba(26, 26, 26, 0.8);
            padding: 12px 25px;
            border-radius: 8px;
            border: 2px solid rgba(255, 77, 141, 0.3);
            text-shadow: 1px 1px 0 #000;
        }

        .container {
            display: flex;
            gap: 25px;
            width: 100%;
            max-width: 1300px;
        }

        .left, .right {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .left {
            flex: 2;
        }

        .right {
            flex: 1;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 20px;
        }

        .card {
            background: linear-gradient(145deg, var(--card), #151515);
            border: 2px solid #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 8px 8px 0 0;
        }

        .card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.6),
                0 0 15px rgba(255, 77, 141, 0.3);
        }

        .card.done {
            border-color: var(--success);
            background: linear-gradient(145deg, #1a2a1f, #0f1a13);
        }

        .card.done::before {
            background: linear-gradient(90deg, var(--success), #00cc6a);
        }

        .card .task-name {
            font-size: 0.9rem;
            color: var(--primary);
            text-align: center;
            margin-top: 5px;
        }

        .card.done .task-name {
            color: var(--success);
        }

        .card .streak {
            font-size: 0.7rem;
            color: var(--secondary);
        }

        .card .level {
            font-size: 0.6rem;
            color: var(--muted);
        }

        .progress-container {
            width: 90%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .progress {
            width: 100%;
            height: 16px;
            background: #2a2a2a;
            border: 2px solid #3a3a3a;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 0.7s ease;
            position: relative;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%);
        }

        .card.done .progress-bar {
            background: linear-gradient(90deg, var(--success), #00cc6a);
        }

        .progress-text {
            font-size: 0.6rem;
            color: var(--muted);
            align-self: flex-start;
        }

        .controls {
            display: flex;
            gap: 10px;
            width: 100%;
            justify-content: center;
            margin-top: 10px;
        }

        button {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.6rem;
            padding: 10px 15px;
            border: 2px solid #3a3a3a;
            border-radius: 6px;
            cursor: pointer;
            color: var(--text);
            transition: all 0.3s ease;
            background: linear-gradient(145deg, var(--button-bg), #252525);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
            text-shadow: 1px 1px 0 #000;
            image-rendering: pixelated;
        }

        button:hover {
            background: linear-gradient(145deg, var(--button-hover), #2a2a2a);
            transform: translateY(-2px);
            border-color: var(--primary);
            box-shadow: 
                0 6px 12px rgba(0, 0, 0, 0.5),
                0 0 10px rgba(255, 77, 141, 0.3);
        }

        button:active {
            transform: translateY(1px);
        }

        button.mark {
            background: linear-gradient(145deg, #2a2a2a, #252525);
        }

        button.mark.done {
            background: linear-gradient(145deg, #1a2a1f, #152019);
            color: var(--success);
        }

        button.undo {
            background: linear-gradient(145deg, #3a2a2a, #302020);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            border-color: #3a3a3a;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
        }

        /* Delete Button Styles */
        .delete-task {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(145deg, var(--danger), #e05555);
            color: white;
            border: 2px solid #ff6b6b;
            border-radius: 4px;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.6rem;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
        }

        .delete-task:hover {
            background: linear-gradient(145deg, #ff6b6b, #e05555);
            transform: scale(1.1);
            box-shadow: 0 3px 6px rgba(255, 0, 0, 0.3);
        }

        .card:hover .delete-task {
            opacity: 1;
        }

        /* Notepad Styles */
        .notepad-container {
            position: relative;
            margin-top: 10px;
        }

        .notepad {
            background: linear-gradient(145deg, var(--notepad-bg), #151515);
            border: 2px solid var(--notepad-border);
            border-radius: 8px;
            padding: 20px;
            min-height: 350px;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .notepad::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 8px 8px 0 0;
        }

        .notepad-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--notepad-border);
            min-height: 40px;
        }

        .notepad-title {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.8rem;
            color: var(--notepad-header);
            flex: 1;
        }

        .notepad-controls {
            display: flex;
            gap: 8px;
            flex-shirk: 0;
        }

        .notepad-controls button {
            background: linear-gradient(145deg, #2a2a2a, #252525);
            color: var(--notepad-text);
            font-size: 0.5rem;
            padding: 6px 10px;
            border-color: #3a3a3a;
            white-space: nowrap;
        }

        .notepad-controls button:hover {
            background: linear-gradient(145deg, #3a3a3a, #2a2a2a);
            color: var(--primary);
        }

        .notepad textarea {
            width: 100%;
            height: 180px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--notepad-border);
            border-radius: 6px;
            color: var(--notepad-text);
            resize: none;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.6rem;
            line-height: 1.5;
            outline: none;
            padding: 15px;
            transition: all 0.3s ease;
        }

        .notepad textarea:focus {
            border-color: var(--primary);
            background: rgba(0, 0, 0, 0.4);
            box-shadow: 0 0 10px rgba(255, 77, 141, 0.3);
        }

        .notepad textarea::placeholder {
            color: var(--muted);
        }

        .notepad-footer {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-size: 0.6rem;
            color: var(--notepad-header);
        }

        /* Stats Section */
        .stats {
            background: linear-gradient(145deg, var(--card), #151515);
            border: 2px solid #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            font-size: 0.7rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .stats::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 8px 8px 0 0;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .stat-value {
            font-size: 1.2rem;
            color: var(--primary);
            font-family: 'Press Start 2P', cursive;
            text-shadow: 0 0 10px rgba(255, 77, 141, 0.5);
        }

        .stat-label {
            color: var(--muted);
            font-size: 0.6rem;
        }

        /* Add Task Section */
        .add-task {
            background: linear-gradient(145deg, var(--card), #151515);
            border: 2px solid #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .add-task::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 8px 8px 0 0;
        }

        .add-task input {
            flex: 1;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--notepad-border);
            border-radius: 6px;
            color: var(--text);
            font-family: 'Press Start 2P', cursive;
            font-size: 0.6rem;
            transition: all 0.3s ease;
        }

        .add-task input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(0, 0, 0, 0.4);
            box-shadow: 0 0 10px rgba(255, 77, 141, 0.3);
        }

        .add-task input::placeholder {
            color: var(--muted);
        }

        .add-task button {
            padding: 12px 18px;
            background: linear-gradient(145deg, var(--button-bg), #252525);
            border-color: #3a3a3a;
        }

        .add-task button:hover {
            background: linear-gradient(145deg, var(--button-hover), #2a2a2a);
        }

        /* Achievement badges */
        .badge {
            display: inline-block;
            font-size: 0.5rem;
            padding: 3px 6px;
            border-radius: 4px;
            margin-left: 6px;
            background: linear-gradient(145deg, var(--accent), #ff1a5e);
            color: white;
            border: 1px solid rgba(255, 51, 102, 0.5);
        }

        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.4s ease;
        }

        @keyframes level-up {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); box-shadow: 0 0 20px var(--success); }
            100% { transform: scale(1); }
        }

        .level-up {
            animation: level-up 0.6s ease;
        }

        /* Quote Section */
        .quote-section {
            background: linear-gradient(145deg, var(--card), #151515);
            border: 2px solid #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .quote-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 8px 8px 0 0;
        }

        .quote-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .quote-title {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.7rem;
            color: var(--secondary);
        }

        .quote-content {
            font-size: 0.7rem;
            color: var(--text);
            text-align: center;
            padding: 20px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.6;
            border: 2px solid var(--notepad-border);
            border-radius: 6px;
            background: rgba(0, 0, 0, 0.3);
            margin-bottom: 15px;
        }

        .quote-author {
            text-align: right;
            font-size: 0.6rem;
            color: var(--muted);
            font-style: italic;
        }

        /* Notes History Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(145deg, var(--notepad-bg), #151515);
            border: 2px solid var(--notepad-border);
            border-radius: 8px;
            width: 90%;
            max-width: 700px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 25px;
            color: var(--notepad-text);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            position: relative;
        }

        .modal-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 8px 8px 0 0;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--notepad-border);
        }

        .modal-title {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.9rem;
            color: var(--notepad-header);
        }

        .close-modal {
            background: linear-gradient(145deg, var(--danger), #e05555);
            border: 2px solid #ff6b6b;
            border-radius: 4px;
            font-size: 1rem;
            color: white;
            cursor: pointer;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            background: linear-gradient(145deg, #ff6b6b, #e05555);
            transform: scale(1.1);
        }

        .history-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .history-item {
            padding: 15px;
            border-bottom: 2px solid var(--notepad-border);
            border-radius: 6px;
            transition: background 0.3s ease;
        }

        .history-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .history-date {
            font-weight: bold;
            font-size: 0.7rem;
            margin-bottom: 8px;
            color: var(--notepad-header);
        }

        .history-content {
            font-size: 0.6rem;
            white-space: pre-wrap;
            color: var(--notepad-text);
            line-height: 1.5;
        }

        .empty-history {
            text-align: center;
            font-size: 0.7rem;
            color: var(--muted);
            padding: 40px 20px;
        }

        /* Footer */
        footer {
            margin-top: 40px;
            text-align: center;
            font-size: 0.6rem;
            color: var(--muted);
            padding: 20px;
            border-top: 2px solid var(--notepad-border);
            width: 100%;
            max-width: 800px;
            background: rgba(26, 26, 26, 0.8);
            border-radius: 8px;
        }

        /* Responsive layout */
        @media (max-width: 1000px) {
            .container {
                flex-direction: column;
            }
            
            .right {
                order: 2;
            }
            
            .left {
                order: 1;
            }
            
            .grid {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            }
        }

        @media (max-width: 600px) {
            body {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .tagline {
                font-size: 0.7rem;
                padding: 10px 20px;
            }
            
            .card {
                padding: 15px;
            }
            
            .stats {
                flex-direction: column;
                gap: 20px;
            }
            
            .controls {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
            
            .add-task {
                flex-direction: column;
            }
            
            .delete-task {
                opacity: 1;
            }
        }

        /* Achievement animations */
        .achievement-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(145deg, var(--accent), #ff1a5e);
            color: white;
            padding: 12px 16px;
            border: 2px solid #ff3366;
            border-radius: 6px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            z-index: 1001;
            transform: translateX(120%);
            transition: transform 0.5s ease;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.6rem;
        }

        .achievement-popup.show {
            transform: translateX(0);
        }
    </style>
</head>
<body>

    <h1>STREAK TRACKER</h1>
    <div class="tagline">BUILD HABITS LIKE YOU BUILD WORLDS</div>

    <div class="container">
        <div class="left">
            <div class="add-task">
                <input type="text" id="new-task-input" placeholder="ENTER NEW HABIT...">
                <button id="add-task-btn"><i class="fas fa-plus"></i> ADD HABIT</button>
            </div>
            
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="total-streak">0</div>
                    <div class="stat-label">MAX STREAK</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="tasks-done">0/0</div>
                    <div class="stat-label">TODAY'S PROGRESS</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="total-level">0</div>
                    <div class="stat-label">MASTERY LEVEL</div>
                </div>
            </div>
            <div class="grid" id="grid">
                <!-- Tasks will be loaded here -->
            </div>
            
            <div class="quote-section">
                <div class="quote-header">
                    <div class="quote-title">MOTIVATION STATION</div>
                    <button id="new-quote"><i class="fas fa-sync-alt"></i> NEW QUOTE</button>
                </div>
                <div class="quote-content" id="quote-text">
                    YOUR JOURNEY TO GREATNESS STARTS WITH A SINGLE STEP. CLICK FOR INSPIRATION!
                </div>
                <div class="quote-author" id="quote-author"></div>
            </div>
        </div>
        <div class="right">
            <div class="notepad-container">
                <div class="notepad">
                    <div class="notepad-header">
                        <div class="notepad-title">PROGRESS JOURNAL</div>
                        <div class="notepad-controls">
                            <button id="save-notes"><i class="fas fa-save"></i> SAVE</button>
                            <button id="view-history"><i class="fas fa-history"></i> HISTORY</button>
                        </div>
                    </div>
                    <textarea id="notes" placeholder="REFLECT ON YOUR JOURNEY, TRACK INSIGHTS, CELEBRATE WINS..."></textarea>
                    <div class="notepad-footer">
                        <span id="char-count">0 CHARACTERS</span>
                        <button id="clear-notes"><i class="fas fa-trash"></i> CLEAR</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notes History Modal -->
    <div class="modal" id="history-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">JOURNAL HISTORY</div>
                <button class="close-modal">&times;</button>
            </div>
            <div class="history-list" id="history-list">
                <!-- History items will be added here -->
            </div>
        </div>
    </div>

    <footer>YOUR PROGRESS IS AUTOMATICALLY SAVED. KEEP FORGING AHEAD! 🔥</footer>

    <script>
        // Initialize with empty tasks array
        let TASKS = JSON.parse(localStorage.getItem("tasks")) || [];
        let taskData = JSON.parse(localStorage.getItem("taskData") || "{}");
        let meta = JSON.parse(localStorage.getItem("meta") || "{}");
        let notes = localStorage.getItem("notes") || "";
        let notesHistory = JSON.parse(localStorage.getItem("notesHistory") || "[]");
        
        // Quote tracking to avoid repeats
        let usedQuotes = JSON.parse(localStorage.getItem("usedQuotes") || "[]");
        let lastQuoteIndex = -1;
        
        // Initialize task data for each task
        function validateTaskData() {
            TASKS = TASKS.filter(task => task && task.trim() !== "");
            
            TASKS.forEach(task => {
                if (!taskData[task]) {
                    taskData[task] = { 
                        level: 0, 
                        streak: 0, 
                        lastDone: "", 
                        doneToday: false 
                    };
                }
                
                // Ensure data integrity
                taskData[task].level = Math.max(0, taskData[task].level || 0);
                taskData[task].streak = Math.max(0, taskData[task].streak || 0);
                taskData[task].doneToday = !!taskData[task].doneToday;
            });
            
            save();
        }

        // Save the initialized data
        localStorage.setItem("taskData", JSON.stringify(taskData));
        localStorage.setItem("tasks", JSON.stringify(TASKS));

        // Motivational quotes with catchy phrases
        const motivationalQuotes = [
            { text: "DISCIPLINE IS CHOOSING BETWEEN WHAT YOU WANT NOW AND WHAT YOU WANT MOST.", author: "ANONYMOUS" },
            { text: "THE ONLY BAD WORKOUT IS THE ONE THAT DIDN'T HAPPEN.", author: "ANONYMOUS" },
            { text: "SMALL DAILY IMPROVEMENTS ARE THE KEY TO STAGGERING LONG-TERM RESULTS.", author: "ANONYMOUS" },
            { text: "DON'T COUNT THE DAYS, MAKE THE DAYS COUNT.", author: "MUHAMMAD ALI" },
            { text: "YOUR FUTURE SELF WILL THANK YOU FOR THE HABITS YOU BUILD TODAY.", author: "ANONYMOUS" },
            { text: "THE HARDEST STEP IS ALWAYS THE FIRST ONE. THE REST IS MOMENTUM.", author: "ANONYMOUS" },
            { text: "CONSISTENCY IS THE TRUE FOUNDATION OF GREATNESS.", author: "ANONYMOUS" },
            { text: "EVERY EXPERT WAS ONCE A BEGINNER WHO REFUSED TO GIVE UP.", author: "ANONYMOUS" },
            { text: "YOUR HABITS DETERMINE YOUR FUTURE. CHOOSE THEM WISELY.", author: "ANONYMOUS" },
            { text: "PROGRESS, NOT PERFECTION. FOCUS ON SHOWING UP EVERY DAY.", author: "ANONYMOUS" },
            { text: "THE ONLY LIMIT TO YOUR IMPACT IS YOUR IMAGINATION AND COMMITMENT.", author: "TONY ROBBINS" },
            { text: "SUCCESS IS THE SUM OF SMALL EFFORTS REPEATED DAY IN AND DAY OUT.", author: "ROBERT COLLIER" },
            { text: "DON'T STOP WHEN YOU'RE TIRED. STOP WHEN YOU'RE DONE.", author: "ANONYMOUS" },
            { text: "THE MOMENT YOU WANT TO QUIT IS THE MOMENT YOU NEED TO KEEP PUSHING.", author: "ANONYMOUS" },
            { text: "YOUR BODY CAN STAND ALMOST ANYTHING. IT'S YOUR MIND YOU HAVE TO PERSUADE.", author: "ANONYMOUS" },
            { text: "STRENGTH DOESN'T COME FROM WHAT YOU CAN DO. IT COMES FROM OVERCOMING WHAT YOU ONCE THOUGHT YOU COULDN'T.", author: "RIKKI ROGERS" },
            { text: "BE SO GOOD THEY CAN'T IGNORE YOU.", author: "STEVE MARTIN" },
            { text: "THE PAIN OF DISCIPLINE OR THE PAIN OF REGRET. YOU CHOOSE.", author: "ANONYMOUS" },
            { text: "DREAM BIG. START SMALL. ACT NOW.", author: "ROBIN SHARMA" },
            { text: "THE ONLY WAY TO DO GREAT WORK IS TO LOVE WHAT YOU DO.", author: "STEVE JOBS" },
            { text: "YOUR TIME IS LIMITED. DON'T WASTE IT LIVING SOMEONE ELSE'S LIFE.", author: "STEVE JOBS" },
            { text: "BELIEVE YOU CAN AND YOU'RE HALFWAY THERE.", author: "THEODORE ROOSEVELT" },
            { text: "THE SECRET OF GETTING AHEAD IS GETTING STARTED.", author: "MARK TWAIN" },
            { text: "DON'T WATCH THE CLOCK; DO WHAT IT DOES. KEEP GOING.", author: "SAM LEVENSON" },
            { text: "THE FIRE WITHIN YOU IS STRONGER THAN THE OBSTACLES AROUND YOU.", author: "ANONYMOUS" }
        ];

        // Initialize notes
        document.getElementById("notes").value = notes;
        document.getElementById("char-count").textContent = `${notes.length} CHARACTERS`;
        
        // Add task functionality
        document.getElementById("add-task-btn").addEventListener("click", addNewTask);
        document.getElementById("new-task-input").addEventListener("keypress", function(e) {
            if (e.key === "Enter") {
                addNewTask();
            }
        });

        function addNewTask() {
            const input = document.getElementById("new-task-input");
            const taskName = input.value.trim().toUpperCase();
            
            if (taskName === "") {
                alert("PLEASE ENTER A HABIT NAME!");
                return;
            }
            
            if (TASKS.includes(taskName)) {
                alert("THIS HABIT ALREADY EXISTS!");
                return;
            }
            
            // Add task limit
            if (TASKS.length >= 15) {
                alert("MAXIMUM 15 HABITS ALLOWED FOR OPTIMAL FOCUS!");
                return;
            }
            
            // Add length validation
            if (taskName.length > 50) {
                alert("HABIT NAME TOO LONG! MAXIMUM 50 CHARACTERS.");
                return;
            }
            
            // Add to tasks array
            TASKS.push(taskName);
            
            // Initialize task data
            taskData[taskName] = { 
                level: 0, 
                streak: 0, 
                lastDone: "", 
                doneToday: false 
            };
            
            // Save and render
            save();
            render();
            
            // Clear input
            input.value = "";
            
            // Show achievement
            showAchievement("NEW HABIT ADDED!", "YOUR JOURNEY BEGINS NOW!");
        }

        // Notes event listeners
        document.getElementById("notes").addEventListener("input", () => {
            const notes = document.getElementById("notes").value;
            localStorage.setItem("notes", notes);
            document.getElementById("char-count").textContent = `${notes.length} CHARACTERS`;
        });

        document.getElementById("save-notes").addEventListener("click", () => {
            const notes = document.getElementById("notes").value;
            const date = new Date().toLocaleDateString();
            
            // Save current notes
            localStorage.setItem("notes", notes);
            
            // Add to history if not empty
            if (notes.trim() !== "") {
                notesHistory.unshift({
                    date: date,
                    content: notes
                });
                
                // Keep only last 30 entries
                if (notesHistory.length > 30) {
                    notesHistory = notesHistory.slice(0, 30);
                }
                
                localStorage.setItem("notesHistory", JSON.stringify(notesHistory));
            }
            
            showAchievement("JOURNAL SAVED!", "YOUR PROGRESS IS RECORDED!");
        });

        document.getElementById("clear-notes").addEventListener("click", () => {
            if (confirm("ARE YOU SURE YOU WANT TO CLEAR ALL NOTES?")) {
                document.getElementById("notes").value = "";
                localStorage.setItem("notes", "");
                document.getElementById("char-count").textContent = "0 CHARACTERS";
            }
        });

        // Quote functionality with non-repeating logic
        document.getElementById("new-quote").addEventListener("click", getNewQuote);

        function getNewQuote() {
            let availableQuotes = [];
            
            // If we've used all quotes, reset the tracking
            if (usedQuotes.length >= motivationalQuotes.length) {
                usedQuotes = [];
                localStorage.setItem("usedQuotes", JSON.stringify(usedQuotes));
            }
            
            // Find quotes that haven't been used recently
            motivationalQuotes.forEach((quote, index) => {
                if (!usedQuotes.includes(index)) {
                    availableQuotes.push(index);
                }
            });
            
            // Select a random quote from available ones
            const randomIndex = Math.floor(Math.random() * availableQuotes.length);
            const quoteIndex = availableQuotes[randomIndex];
            const quote = motivationalQuotes[quoteIndex];
            
            // Update last quote and mark as used
            lastQuoteIndex = quoteIndex;
            usedQuotes.push(quoteIndex);
            localStorage.setItem("usedQuotes", JSON.stringify(usedQuotes));
            
            // Display the quote
            document.getElementById("quote-text").textContent = `"${quote.text}"`;
            document.getElementById("quote-author").textContent = `- ${quote.author}`;
        }

        // Achievement notification
        function showAchievement(title, message) {
            const popup = document.createElement('div');
            popup.className = 'achievement-popup';
            popup.innerHTML = `
                <div style="margin-bottom: 5px;">${title}</div>
                <div style="font-size: 0.5rem;">${message}</div>
            `;
            document.body.appendChild(popup);
            
            setTimeout(() => {
                popup.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                popup.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(popup);
                }, 500);
            }, 3000);
        }

        // History modal functionality
        document.getElementById("view-history").addEventListener("click", () => {
            const modal = document.getElementById("history-modal");
            const historyList = document.getElementById("history-list");
            
            // Clear previous content
            historyList.innerHTML = "";
            
            // Add history items
            if (notesHistory.length === 0) {
                historyList.innerHTML = '<div class="empty-history">NO JOURNAL ENTRIES YET. START WRITING YOUR JOURNEY!</div>';
            } else {
                notesHistory.forEach(item => {
                    const historyItem = document.createElement("div");
                    historyItem.className = "history-item";
                    historyItem.innerHTML = `
                        <div class="history-date">${item.date}</div>
                        <div class="history-content">${item.content}</div>
                    `;
                    historyList.appendChild(historyItem);
                });
            }
            
            // Show modal
            modal.style.display = "flex";
        });

        document.querySelector(".close-modal").addEventListener("click", () => {
            document.getElementById("history-modal").style.display = "none";
        });

        // Close modal when clicking outside
        window.addEventListener("click", (event) => {
            const modal = document.getElementById("history-modal");
            if (event.target === modal) {
                modal.style.display = "none";
            }
        });

        function today() { return new Date().toDateString(); }
        
        function yesterday() { 
            let d = new Date(); 
            d.setDate(d.getDate() - 1); 
            return d.toDateString(); 
        }

        function save() { 
            localStorage.setItem("taskData", JSON.stringify(taskData)); 
            localStorage.setItem("meta", JSON.stringify(meta));
            localStorage.setItem("tasks", JSON.stringify(TASKS));
        }

        function updateStats() {
            // Calculate total streak (max streak among all tasks)
            const streaks = TASKS.map(task => taskData[task].streak);
            const totalStreak = streaks.length > 0 ? Math.max(...streaks) : 0;
            
            // Count tasks done today
            const tasksDone = TASKS.filter(task => taskData[task].doneToday).length;
            
            // Calculate total level
            const totalLevel = TASKS.reduce((sum, task) => sum + taskData[task].level, 0);
            
            // Update DOM
            document.getElementById('total-streak').textContent = totalStreak;
            document.getElementById('tasks-done').textContent = `${tasksDone}/${TASKS.length}`;
            document.getElementById('total-level').textContent = totalLevel;
        }

        function render() {
            const grid = document.getElementById("grid");
            grid.innerHTML = "";
            
            if (TASKS.length === 0) {
                grid.innerHTML = `
                    <div class="card" style="grid-column: 1 / -1; text-align: center; padding: 40px 20px;">
                        <div class="task-name">NO HABITS YET</div>
                        <div class="streak" style="margin-top: 20px; font-size: 0.7rem;">YOUR JOURNEY TO GREATNESS STARTS WITH YOUR FIRST HABIT!</div>
                    </div>
                `;
                return;
            }
            
            TASKS.forEach(task => {
                const d = taskData[task];
                const percent = Math.min(100, (d.level % 10) * 10);
                const card = document.createElement("div");
                card.className = `card ${d.doneToday ? 'done' : ''}`;
                
                // Properly escape task names
                const escapedTask = task.replace(/'/g, "\\'").replace(/"/g, "&quot;");
                
                card.innerHTML = `
                <button class="delete-task" onclick="deleteTask('${escapedTask}')" title="DELETE HABIT">
                    <i class="fas fa-times"></i>
                </button>
                <div class="task-name">${task} ${d.streak >= 7 ? '<span class="badge">🔥 STREAKING!</span>' : ''} ${d.streak >= 30 ? '<span class="badge">⭐ ELITE!</span>' : ''}</div>
                <div class="streak">CURRENT STREAK: ${d.streak} DAYS</div>
                <div class="level">MASTERY LEVEL: ${Math.floor(d.level / 10)}</div>
                <div class="progress-container">
                    <div class="progress-text">PROGRESS: ${d.level % 10}/10</div>
                    <div class="progress"><div class="progress-bar" style="width:${percent}%"></div></div>
                </div>
                <div class="controls">
                    <button class="mark ${d.doneToday ? 'done' : ''}" onclick="markTask('${escapedTask}')" ${d.doneToday ? 'disabled' : ''}>${d.doneToday ? "COMPLETED!" : "MARK DONE"}</button>
                    <button class="undo" onclick="undoTask('${escapedTask}')" ${!d.doneToday ? 'disabled' : ''}>UNDO</button>
                </div>`;
                grid.appendChild(card);
            });
            
            updateStats();
        }

        function deleteTask(task) {
            if (confirm(`ARE YOU SURE YOU WANT TO DELETE "${task}"? THIS WILL REMOVE ALL PROGRESS FOR THIS HABIT.`)) {
                // Remove from tasks array
                TASKS = TASKS.filter(t => t !== task);
                
                // Remove from taskData
                delete taskData[task];
                
                // Save and render
                save();
                render();
                
                showAchievement("HABIT REMOVED", "FOCUS IS KEY TO MASTERY!");
            }
        }

        function checkNewDay() {
            const t = today();
            if (meta.lastChecked !== t) {
                TASKS.forEach(task => {
                    const d = taskData[task];
                    // Reset doneToday for all tasks on new day
                    d.doneToday = false;
                    
                    // Only break streak if task was previously tracked and missed yesterday
                    if (d.lastDone && d.lastDone !== yesterday() && d.lastDone !== t) {
                        if (d.level > 0) d.level = Math.max(0, d.level - 1);
                        d.streak = 0;
                    }
                });
                meta.lastChecked = t;
                save();
                render(); // Re-render to show updated status
            }
        }

        function markTask(task) {
            const d = taskData[task];
            if (d.doneToday && d.lastDone === today()) return;
            
            // Add visual feedback
            const card = document.querySelector(`.card:has(button[onclick="markTask('${task}')"])`);
            if (card) {
                card.classList.add('pulse');
                setTimeout(() => card.classList.remove('pulse'), 500);
            }
            
            // FIXED STREAK LOGIC:
            if (d.lastDone === yesterday()) {
                // Continue streak if done yesterday
                d.streak += 1;
            } else if (d.lastDone !== today()) {
                // Start new streak if not done today and last done wasn't yesterday
                d.streak = 1;
            } else {
                // If no lastDone date, start streak at 1
                d.streak = Math.max(1, d.streak);
            }
            
            d.level += 1;
            d.lastDone = today();
            d.doneToday = true;
            save();
            render();
            
            // Show achievement for streaks
            if (d.streak === 7) {
                showAchievement("🔥 7-DAY STREAK!", "YOU'RE BUILDING MOMENTUM!");
            } else if (d.streak === 30) {
                showAchievement("⭐ 30-DAY MASTER!", "YOU'VE ACHIEVED ELITE STATUS!");
            } else if (d.streak === 100) {
                showAchievement("🏆 100-DAY LEGEND!", "YOU'RE UNSTOPPABLE!");
            } else if (d.level % 10 === 0) {
                showAchievement("🎯 LEVEL UP!", `REACHED LEVEL ${Math.floor(d.level / 10)}!`);
            }
        }

        function undoTask(task) {
            const d = taskData[task];
            if (d.lastDone !== today()) return;
            
            d.level = Math.max(0, d.level - 1);
            if (d.streak > 1) d.streak -= 1; else d.streak = 0;
            d.lastDone = "";
            d.doneToday = false;
            save();
            render();
        }

        // Make functions globally available
        window.markTask = markTask;
        window.undoTask = undoTask;
        window.deleteTask = deleteTask;

        // Initialize the app
        (function init() {
            try {
                validateTaskData();
                checkNewDay();
                render();
                getNewQuote();
            } catch (error) {
                console.error('Initialization error:', error);
                alert('ERROR LOADING APP DATA. RESETTING TO DEFAULT.');
                // Reset to default state
                TASKS = [];
                taskData = {};
                meta = {};
                save();
                render();
            }
        })();
    </script>
</body>

</html>


